YUI.add("hermes-template-featured-toast",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,t,s){return'<div class="featured-toast">\n\t'+e.escapeExpression((r.renderTrustedMarkup||a&&a.renderTrustedMarkup||r.helperMissing).call(null!=a?a:{},null!=a?a.htmlContent:a,{name:"renderTrustedMarkup",hash:{},data:s}))+"\n</div>\n"},useData:!0}),t={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(t[a]=r)}),e.Template.register("hermes/featured-toast",function(a,s){return s=s||{},s.partials=s.partials?e.merge(t,s.partials):t,r(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("featured-toast-view",function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.config=t.featuredToastConfig,this.config.id=this.config.id||"",this.config.htmlContent=this.config.htmlContent||"",this.config.showOnActivate=void 0!==this.config.showOnActivate&&this.config.showOnActivate,this.config.classList=this.config.classList||[]},loadState:function(){return t.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("featured-toast",{htmlContent:this.config.htmlContent,classList:this.config.classList})},activate:function(){var i=this,n=this.get("container");this.contentContainer=n.one(".featured-toast"),this.initialClasses=Array.prototype.slice.call(this.contentContainer.getDOMNode().classList),this.updateClasses(),this.setupEvents(),this.config.showOnActivate&&setTimeout(function(){i.show()},0),setTimeout(function(){i.applyBannerOffset()},100),this.registerEventHandler(t.on("resize",t.betterThrottle(this.applyBannerOffset.bind(this),500,this,!0))),this.fire("activated")},show:function(){this.get("container").addClass("activated")},dismiss:function(){var t=this.get("container");t.setStyle("bottom",null),t.removeClass("activated")},handlePrimaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("primaryActionClicked",{clickEvent:t})},handleSecondaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("secondaryActionClicked",{clickEvent:t})},applyBannerOffset:function(){var i,n=t.one(".footer-banner-view .footer-container");n&&(i=n.get("clientHeight"),this.get("container").setStyle("bottom",i))},setup:function(t){this.config.htmlContent=t.htmlContent||"",this.config.classList=t.classList||[],this.contentContainer.set("innerHTML",this.config.htmlContent),this.updateClasses(),this.setupEvents()},updateClasses:function(){var t=this;this.contentContainer.set("className",""),this.initialClasses.forEach(function(i){t.contentContainer.addClass(i)}),this.config.classList.forEach(function(i){t.contentContainer.addClass(i)})},setupEvents:function(){var t=this.get("container"),i=t.one(".primary-action"),n=t.one(".secondary-action");i&&i.on("click",this.handlePrimaryActionClick.bind(this)),n&&n.on("click",this.handleSecondaryActionClick.bind(this))}})},"@VERSION@",{requires:["flickr-view","hermes-template-featured-toast"]});YUI.add("user-limits-helper",function(i){var t=i.config.flickr.account.photo_limit,e=i.config.flickr.account.near_photo_limit;i.UserLimitsHelper={isNearUploadLimit:function(i,o){return o.getViewer().signedIn&&!o.getViewer().isPro&&i.getValue("photoCount")>=e&&i.getValue("photoCount")<t},isAtUploadLimit:function(i,e){return e.getViewer().signedIn&&!e.getViewer().isPro&&i.getValue("photoCount")>=t},isOverUploadLimit:function(i,e){return e.getViewer().signedIn&&!e.getViewer().isPro&&i.getValue("photoCount")>t},isOverARRLimit:function(i,e){return e.getViewer().signedIn&&!e.getViewer().isPro&&this.getARRCount(i)>t},hasReachedNearUploadLimit:function(i,t){return this.isNearUploadLimit(i,t)||this.isAtUploadLimit(i,t)||this.isOverUploadLimit(i,t)},hasReachedUploadLimit:function(i,t){return this.isAtUploadLimit(i,t)||this.isOverUploadLimit(i,t)},remainingAvailableUploads:function(i,t){return t.getValue("uploadLimit")-i.getValue("photoCount")},getARRCount:function(i){var t=i.getValue("arrPhotoCount");return t>=0?t:i.getValue("photoCount")}}},"@VERSION@",{requires:[]});YUI.add("html-file-dragdrop",function(e){"use strict";var r="htmlFileDragDrop",o=r+"-drag-over",t=r+"-error",i=["image/png","image/jpeg"];e.HtmlFileDragDrop=function(r){e.config.win.File&&e.config.win.FileList&&e.config.win.FileReader&&r.dropZone&&(this.dropZone=e.one(r.dropZone),this.dropZone.on("dragover",this.handleDragOver.bind(this)),this.dropZone.on("dragleave",this.handleDragLeave.bind(this)),this.dropZone.on("drop",this.handleDrop.bind(this)))},e.HtmlFileDragDrop.prototype.reset=function(){this.dropZone.removeClass(t),this.dropZone.removeClass(o)},e.HtmlFileDragDrop.prototype.handleDragOver=function(e){e.halt(),this.reset(),this.dropZone.addClass(o)},e.HtmlFileDragDrop.prototype.handleDragLeave=function(e){e.halt(),this.reset()},e.HtmlFileDragDrop.prototype.showError=function(){this.dropZone.addClass(t)},e.HtmlFileDragDrop.prototype.handleDrop=function(e){var r;if(e.halt(),this.dropZone.removeClass(o),e._event.dataTransfer.files.length>1)return this.dropZone.addClass(t),void this.fire("drop",new Error("FILE_COUNT"));if((r=e._event.dataTransfer.files[0])&&r.name){if(i.indexOf(r.type)<0)return void this.fire("drop",new Error("FILE_TYPE"));this.fire("drop",r)}},e.augment(e.HtmlFileDragDrop,e.EventTarget,!0,null,{prefix:r})},"@VERSION@",{affinity:"",requires:["event-custom"],optional:[]});YUI.add("hermes-template-photo-selector",function(t,e){var a=t.Template.Handlebars.revive({1:function(t,e,a,s,n){return'\t\t<div class="photo-selector-search-list-yours">\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},3:function(t,e,a,s,n){return'\t\t<div class="photo-selector-search-list-contacts">\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},5:function(t,e,a,s,n){return'\t\t<div class="photo-selector-search-list-everyone">\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},7:function(t,e,a,s,n){return'\t\t<div class="photo-selector-search-list-marketplace"\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},9:function(t,e,a,s,n){var l;return'<div class="photo-selector-upload is-hiding">\n'+(null!=(l=a.if.call(null!=e?e:{},null!=e?e.canUpload:e,{name:"if",hash:{},fn:t.program(10,n,0),inverse:t.program(12,n,0),data:n}))?l:"")+"</div>\n"},10:function(t,e,a,s,n){var l=null!=e?e:{},i=a.helperMissing,o=t.escapeExpression;return'\t\t<p class="upload-error"></p>\n\t\t<div class="drop-zone">\n\t\t\t<div class="drop-zone-content">\n\t\t\t\t<div class="balls"></div>\n\t\t\t\t<input type="file" class="file-select" name="file-select" accept="image/jpeg, image/png" />\n\t\t\t\t<p><i class="upload-icon"></i>'+o((a.intlHTMLMessage||e&&e.intlHTMLMessage||i).call(l,{name:"intlHTMLMessage",hash:{intlName:"wallart.DRAG_DROP_TO_UPLOAD"},data:n}))+"</p>\n\t\t\t\t<p>"+o((a.intlHTMLMessage||e&&e.intlHTMLMessage||i).call(l,{name:"intlHTMLMessage",hash:{intlName:"wallart.PHOTOS_UPLOADED_AS_PRIVATE"},data:n}))+'</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<ul class="preview"></ul>\n'},12:function(t,e,a,s,n){var l=null!=e?e:{},i=a.helperMissing,o=t.escapeExpression;return'\t\t<div class="cant-upload">\n\t\t\t<div class="cant-upload-message">\n\t\t\t\t<span>'+o((a.intlMessage||e&&e.intlMessage||i).call(l,{name:"intlMessage",hash:{limitCount:(a.friendlyNumber||e&&e.friendlyNumber||i).call(l,1e3,{name:"friendlyNumber",hash:{},data:n}),intlName:"upload-blocking.YOUVE_REACHED_UPLOAD_LIMIT"},data:n}))+'</span>\n\t\t\t\t<a href="/account/upgrade/pro/">'+o((a.intlMessage||e&&e.intlMessage||i).call(l,{name:"intlMessage",hash:{intlName:"common.GET_PRO"},data:n}))+"</a>\n\t\t\t</div>\n\t\t</div>\n"},14:function(t,e,a,s,n){return'<div class="group-photo-selector-photos-wrapper">\n\t<div class="group-photo-selector-photos photo-selector-photos">\n\t\t<div class="group-photo-selector-photos-container">\n\t\t</div>\n\t</div>\n</div>\n'},compiler:[7,">= 4.0.0"],main:function(t,e,a,s,n){var l,i=null!=e?e:{};return'<div class="photo-selector-title-bar hidden">\n\t<div class="back-to-list">\n\t\t<div class="back-to-list-icon"><svg class="icon icon-back"><use xlink:href="#icon-back"></use></svg></div>\n\t\t<div class="back-to-list-text">'+t.escapeExpression((a.intlMessage||e&&e.intlMessage||a.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"},data:n}))+'</div>\n\t</div>\n\t<div class="title"></div>\n</div>\n\n<div class="photo-selector-photos-wrapper">\n\t<div class="photo-selector-photos">\n\t\t<div class="photo-selector-photos-container">\n\t\t\t<div class="loader"><div class="balls"></div></div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="photo-selector-search-lists-wrapper is-hiding">\n'+(null!=(l=a.if.call(i,null!=(l=null!=e?e.searchable:e)?l.yours:l,{name:"if",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n}))?l:"")+"\n"+(null!=(l=a.if.call(i,null!=(l=null!=e?e.searchable:e)?l.contacts:l,{name:"if",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n}))?l:"")+"\n"+(null!=(l=a.if.call(i,null!=(l=null!=e?e.searchable:e)?l.everyone:l,{name:"if",hash:{},fn:t.program(5,n,0),inverse:t.noop,data:n}))?l:"")+"\n"+(null!=(l=a.if.call(i,null!=(l=null!=e?e.searchable:e)?l.marketplace:l,{name:"if",hash:{},fn:t.program(7,n,0),inverse:t.noop,data:n}))?l:"")+"</div>\n\n"+(null!=(l=a.if.call(i,null!=e?e.hasUploadCapabilities:e,{name:"if",hash:{},fn:t.program(9,n,0),inverse:t.noop,data:n}))?l:"")+"\n"+(null!=(l=a.if.call(i,null!=e?e.hasGroupCapabilities:e,{name:"if",hash:{},fn:t.program(14,n,0),inverse:t.noop,data:n}))?l:"")},useData:!0}),s={};t.Array.each([],function(e){var a=t.Template.get("hermes/"+e);a&&(s[e]=a)}),t.Template.register("hermes/photo-selector",function(e,n){return n=n||{},n.partials=n.partials?t.merge(s,n.partials):s,a(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-infinite-scroll-load-more",function(e,a){var t=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,t,l,n){return'<div class="infinite-scroll-load-more">\n\t<button class="alt">'+e.escapeExpression((t.intlMessage||a&&a.intlMessage||t.helperMissing).call(null!=a?a:{},{name:"intlMessage",hash:{intlName:"common.LOAD_MORE_RESULTS"},data:n}))+"</button>\n</div>"},useData:!0}),l={};e.Array.each([],function(a){var t=e.Template.get("hermes/"+a);t&&(l[a]=t)}),e.Template.register("hermes/infinite-scroll-load-more",function(a,n){return n=n||{},n.partials=n.partials?e.merge(l,n.partials):l,t(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-license-detail",function(e,a){var s=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,s,l,t){var n=null!=a?a:{},i=s.helperMissing,r=e.escapeExpression;return'<p class="secondary" style="margin-top: 0;">'+r((s.intlMessage||a&&a.intlMessage||i).call(n,{name:"intlMessage",hash:{intlName:null!=a?a.title:a},data:t}))+'</p>\n<p class="secondary" style="margin-bottom: 0;">'+r((s.intlMessage||a&&a.intlMessage||i).call(n,{name:"intlMessage",hash:{intlName:null!=a?a.body:a},data:t}))+"</p>\n"},useData:!0}),l={};e.Array.each([],function(a){var s=e.Template.get("hermes/"+a);s&&(l[a]=s)}),e.Template.register("hermes/license-detail",function(a,t){return t=t||{},t.partials=t.partials?e.merge(l,t.partials):l,s(a,t)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-list-layout-row",function(t){(t.PhotoListLayoutRow=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.additionalHeight=t.additionalHeight||0,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight||Number.NEGATIVE_INFINITY,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight||Number.POSITIVE_INFINITY,this.rightToLeft=t.rightToLeft,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(i){var e,h,s,o=this.items.concat(i),a=this.width-(o.length-1)*this.spacing,g=o.reduce(function(t,i){return t+i.aspectRatio},0),n=a/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&i.aspectRatio>=1?(this.items.push(t.merge(i)),this._completeLayout(a/i.aspectRatio),!0):0!==g&&(g<this.minAspectRatio?(this.items.push(t.merge(i)),!0):g>this.maxAspectRatio?0===this.items.length?(this.items.push(t.merge(i)),this._completeLayout(a/g),!0):(e=this.width-(this.items.length-1)*this.spacing,h=this.items.reduce(function(t,i){return t+i.aspectRatio},0),s=e/this.targetRowHeight,Math.abs(g-n)>Math.abs(h-s)?(this._completeLayout(e/h),!1):(this.items.push(t.merge(i)),this._completeLayout(a/g),!0)):(this.items.push(t.merge(i)),this._completeLayout(a/g),!0))},forceComplete:function(t,i){var e=this.width-(this.items.length-1)*this.spacing,h=this.items.reduce(function(t,i){return t+i.aspectRatio},0);"number"==typeof i?this._completeLayout(i-this.additionalHeight,!1):t?this._completeLayout(e/h):this._completeLayout(this.targetRowHeight-this.additionalHeight,!1)},isLayoutComplete:function(){return this.height>0},getItems:function(){return this.rightToLeft?this.items.reverse():this.items},getIndexOfItem:function(t){var i=-1;return this.items.some(function(e,h){if(e.id===t)return i=h,!0}),i},setTop:function(t){this.top=t,this.items.forEach(function(i){i.geometry.top=t})},_completeLayout:function(t,i){var e,h,s,o,a,g,n=this.rightToLeft?-this.left:this.left,r=this.width-(this.items.length-1)*this.spacing,m=this;void 0===i&&(i=!0),(h=Math.round(t))!==(s=Math.max(this.edgeCaseMinRowHeight,Math.min(h,this.edgeCaseMaxRowHeight)))?(this.height=s,e=r/s/(r/h)):(this.height=h,e=1),this.items.forEach(function(t,i){t.geometry={top:m.top,width:Math.round(t.aspectRatio*m.height*e),height:m.height+m.additionalHeight},m.rightToLeft?t.geometry.left=m.width-n-t.geometry.width:t.geometry.left=n,n+=t.geometry.width+m.spacing}),this.height+=m.additionalHeight,i&&(this.rightToLeft||(n-=this.spacing+this.left),o=(n-this.width)/this.items.length,a=this.items.map(function(t,i){return Math.round((i+1)*o)}),1===this.items.length?((g=this.items[0].geometry).width-=Math.round(o),this.rightToLeft&&(g.left+=Math.round(o))):this.items.forEach(function(t,i){i>0?(t.geometry.left-=a[i-1],t.geometry.width-=a[i]-a[i-1]):t.geometry.width-=a[i]}))}}},"@VERSION@",{requires:[]});